<?xml version="1.0" encoding="UTF-8"?>
<editor xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:noNamespaceSchemaLocation="../../../../../../config-editor.xsd"
        xmlns:gn="http://www.fao.org/geonetwork"
        xmlns:gco="http://www.isotc211.org/2005/gco"
        xmlns:gmd="http://www.isotc211.org/2005/gmd"
        xmlns:gmx="http://www.isotc211.org/2005/gmx"
        xmlns:srv="http://www.isotc211.org/2005/srv"
        xmlns:gml="http://www.opengis.net/gml"
  xmlns:xlink="http://www.w3.org/1999/xlink">

  <!-- Form field type configuration. Default is text. -->
  <fields>
    <for name="gmd:abstract" use="textarea"/>
    <for name="gmd:checkPointDescription" use="textarea"/>
    <for name="gmd:credit" use="textarea"/>
    <for name="gmd:description" use="textarea"/>
    <for name="gmd:evaluationMethodDescription" use="textarea"/>
    <for name="gmd:explanation" use="textarea"/>
    <for name="gmd:handlingDescription" use="textarea"/>
    <for name="gmd:maintenanceNote" use="textarea"/>
    <for name="gmd:measureDescription" use="textarea"/>
    <for name="gmd:purpose" use="textarea"/>
    <for name="gmd:orderingInstructions" use="textarea"/>
    <for name="gmd:otherConstraints" use="textarea"/>
    <for name="gmd:statement" use="textarea"/>
    <for name="gmd:supplementalInformation" use="textarea"/>
    <for name="gmd:specificUsage" use="textarea"/>
    <for name="gmd:userNote" use="textarea"/>
    <for name="gmd:useLimitation" use="textarea"/>


    <for name="gco:Distance" use="number"/>
    <for name="gco:Decimal" use="number"/>
    <for name="gco:Integer" use="number"/>
    <for name="gco:Real" use="number"/>
    <for name="gco:Boolean" use="checkbox"/>


    <for name="gco:Date" use="data-gn-date-picker"/>
    <for name="gco:DateTime" use="data-gn-date-picker"/>


    <!-- gmx:FileName/@src attribute -->
    <for name="src" use="data-gn-logo-selector"/>

    <for name="gmd:electronicMailAddress" use="email"/>

    <for name="gmd:language" use="data-gn-language-picker"/>
    <for name="gmd:languageCode" use="data-gn-language-picker"/>

    <for name="gmd:country" use="data-gn-country-picker"/>

    <for name="gmd:referenceSystemInfo" addDirective="data-gn-crs-selector"/>


    <!--
    Enable the following to use subtemplates for extent type.
    <for name="gmd:extent" addDirective="data-gn-directory-entry-selector">
      <directiveAttributes
        data-template-add-action="true"
        data-search-action="true"
        data-popup-action="true"
        data-template-type="extent"
        data-filter='{"_root": "gmd:EX_Extent"}'
        data-insert-modes=""/>
    </for>

    for formats:
    <for name="gmd:resourceFormat" addDirective="data-gn-directory-entry-selector">
      <directiveAttributes
              data-template-add-action="false"
              data-search-action="true"
              data-popup-action="true"
              data-template-type="format"
              data-filter='{"_root": "gmd:MD_Format"}'
              data-insert-modes="xlink"/>
    </for>
    <for name="gmd:distributionFormat" addDirective="data-gn-directory-entry-selector">
      <directiveAttributes
              data-template-add-action="false"
              data-search-action="true"
              data-popup-action="true"
              data-template-type="format"
              data-filter='{"_root": "gmd:MD_Format"}'
              data-insert-modes="xlink"/>
    </for>
    -->

    <for name="gmd:contact" addDirective="data-gn-directory-entry-selector">
      <directiveAttributes
        data-template-add-action="true"
        data-search-action="true"
        data-popup-action="true"
        data-template-type="contact"
        data-insert-modes=""
        data-variables="gmd:role/gmd:CI_RoleCode/@codeListValue~{role}"/>
    </for>
    <for name="gmd:pointOfContact" addDirective="data-gn-directory-entry-selector">
      <directiveAttributes
        data-template-add-action="true"
        data-search-action="true"
        data-popup-action="true"
        data-template-type="contact"
        data-insert-modes=""
        data-variables="gmd:role/gmd:CI_RoleCode/@codeListValue~{role}"/>
    </for>
    <for name="gmd:distributorContact" addDirective="data-gn-directory-entry-selector">
      <directiveAttributes
        data-template-add-action="true"
        data-search-action="true"
        data-popup-action="true"
        data-template-type="contact"
        data-insert-modes=""
        data-variables="gmd:role/gmd:CI_RoleCode/@codeListValue~{role}"/>
    </for>
    <for name="gmd:processor" addDirective="data-gn-directory-entry-selector">
      <directiveAttributes
        data-template-add-action="true"
        data-search-action="true"
        data-popup-action="true"
        data-template-type="contact"
        data-insert-modes=""
        data-variables="gmd:role/gmd:CI_RoleCode/@codeListValue~{role}"/>
    </for>
    <for name="gmd:citedResponsibleParty" addDirective="data-gn-directory-entry-selector">
      <directiveAttributes
        data-template-add-action="true"
        data-search-action="true"
        data-popup-action="true"
        data-template-type="contact"
        data-insert-modes=""
        data-variables="gmd:role/gmd:CI_RoleCode/@codeListValue~{role}"/>
    </for>
    <for name="gmd:report" addDirective="data-gn-directory-entry-selector">
      <directiveAttributes
        data-template-add-action="true"
        data-search-action="true"
        data-popup-action="true"
        data-filter='{"_root": "gmd:DQ_DomainConsistency"}'
        data-insert-modes=""
        data-template-type="report"/>
    </for>


    <!-- Example configuration: Add onLine source from subtemplate
    <for name="gmd:onLine" addDirective="data-gn-directory-entry-selector">
      <directiveAttributes
              data-template-add-action="true"
              data-template-type="onLine"
              data-filter='{"_root": "gmd:CI_OnlineResource"}'/>
    </for>
    -->


    <for name="gmd:descriptiveKeywords" addDirective="data-gn-thesaurus-selector">
      <!--
      Example of configuration to disable free text keywords in the thesaurus selector
      <directiveAttributes data-allow-free-text-keywords="false" />

      To restrict the list of thesaurus allowed, set the include attribute
      for the directive:
      <directiveAttributes data-include="external.theme.httpinspireeceuropaeutheme-theme,external.place.regions"/>

      Exclude a thesaurus:
      <directiveAttributes data-include="-external.place.regions"/>

      Exclude all thesaurus already used in the metadata:
      -->
      <directiveAttributes data-include="xpath::string-join(gmd:MD_Metadata/gmd:identificationInfo
                                          //gmd:thesaurusName/*/gmd:identifier/*/
                                            gmd:code/gmx:Anchor/
                                              concat('-', substring-after(text()[. != ''], 'geonetwork.thesaurus.')), ',')"/>
    </for>
  </fields>


  <fieldsWithFieldset>
    <name>gmd:MD_Metadata</name>
    <name>gmd:identificationInfo</name>
    <name>gmd:distributionInfo</name>
    <name>gmd:portrayalCatalogueInfo</name>
    <name>gmd:portrayalCatalogueCitation</name>
    <name>gmd:thesaurusName</name>
    <name>gmd:resourceConstraints</name>
    <name>gmd:spatialRepresentationInfo</name>
    <name>gmd:pointOfContact</name>
    <name>gmd:contact</name>
    <name>gmd:graphicOverview</name>
    <name>gmd:citedResponsibleParty</name>
    <name>gmd:dataQualityInfo</name>
    <name>gmd:contentInfo</name>
    <name>gmd:distributionFormat</name>
    <name>gmd:referenceSystemInfo</name>
    <name>gmd:spatialResolution</name>
    <name>gmd:offLine</name>
    <name>gmd:onLine</name>
    <name>gmd:address</name>
    <name>gmd:projection</name>
    <name>gmd:ellipsoid</name>
    <name>gmd:attributes</name>
    <name>gmd:geographicBox</name>
    <name>gmd:EX_TemporalExtent</name>
    <name>gmd:EX_VerticalExtent</name>
    <name>gmd:MD_Distributor</name>
    <name>srv:containsOperations</name>
    <name>srv:SV_Parameter</name>
    <name>srv:connectPoint</name>
    <name>srv:SV_CoupledResource</name>
    <name>gmd:metadataConstraints</name>
    <name>gmd:aggregationInfo</name>
    <name>gmd:processStep</name>
    <name>gmd:lineage</name>
    <name>gmd:centerPoint</name>
    <name>gml:verticalCS</name>
    <name>gml:verticalDatum</name>
    <name>gmd:axisDimensionProperties</name>
    <name>gmd:identifier</name>
    <name>gmd:topicCategory</name>
  </fieldsWithFieldset>

  <multilingualFields>
    <!-- In multilingual mode, define which mode
    the widget should have. If expanded, then one
    field per language is displayed. -->
    <expanded>
      <name>gmd:title</name>
      <name>gmd:abstract</name>
    </expanded>
    <!-- All fields in ISO could be multilingual.
    Define element to exclude.

      The name element can optionally have ancestor, child or parent attributes to
      further restrict the exclusion.  For example if some gmd:code elements are
      multilingual but others are not then adding a parent/child/parent attribute
      can restrict the exclude to only some elements.

      For example:
        <name ancestor="gmd:thesaurusName">gmd:code</name>
        or
        <name child="gmx:Anchor">gmd:code</name>
    -->
    <exclude>
      <name>gmd:identifier</name>
      <name>gmd:metadataStandardName</name>
      <name>gmd:metadataStandardVersion</name>
      <name>gmd:hierarchyLevelName</name>
      <name>gmd:parentIdentifier</name>
      <name>gmd:dataSetURI</name>
      <name>gmd:postalCode</name>
      <name>gmd:city</name>
      <name>gmd:language</name>
      <name>gmd:administrativeArea</name>
      <name>gmd:voice</name>
      <name>gmd:facsimile</name>
      <name>gmd:dataset</name>
      <name>gmd:other</name>
      <name>gmd:hoursOfService</name>
      <name>gmd:applicationProfile</name>
      <name>gmd:page</name>
      <name>gmd:date</name>
      <name>gmd:linkage</name>
      <name>gmd:fileName</name>
      <name>gmd:protocol</name>
      <name>gmd:fileType</name>
      <name>gmd:unitsOfDistribution</name>
      <name>gmd:amendmentNumber</name>
      <name>gmd:specification</name>
      <name>gmd:fileDecompressionTechnique</name>
      <name>gmd:turnaround</name>
      <name>gmd:fees</name>
      <name>gmd:userDeterminedLimitations</name>
      <name>gmd:codeSpace</name>
      <name>gmd:version</name>
      <name>gmd:edition</name>
      <name>gmd:ISBN</name>
      <name>gmd:ISSN</name>
      <name>gmd:errorStatistic</name>
      <name>gmd:schemaAscii</name>
      <name>gmd:softwareDevelopmentFileFormat</name>
      <name>gmd:shortName</name>
      <name>gmd:condition</name>
      <name>gmd:maximumOccurence</name>
      <name>gmd:domainValue</name>
      <name>gmd:minimumValue</name>
      <name>gmd:maximumValue</name>
      <name>gmd:densityUnits</name>
      <name>gmd:descriptor</name>
      <name>gmd:denominator</name>
      <name>gmd:classificationSystem</name>
      <name>gmd:checkPointDescription</name>
      <name>gmd:transformationDimensionDescription</name>
      <name>gmd:orientationParameterDescription</name>
      <name>gmd:distance</name>
      <name>srv:name</name>
      <name>srv:invocationName</name>
      <name>srv:serviceTypeVersion</name>
      <name>srv:operationName</name>
      <name>srv:identifier</name>
      <name>srv:serviceType</name>
      <name ancestor="gmd:thesaurusName">gmd:code</name>
      <name ancestor="gmd:aggregateDataSetIdentifier">gmd:code</name>
      <name ancestor="gmd:CI_Citation">gmd:code</name>
    </exclude>
  </multilingualFields>

  <tableFields>
    <table for="gmd:CI_ResponsibleParty">
      <header>
        <!-- TODO: Add label from strings.xml / label with context-->
        <col label="gmd:organisationName"/>
        <col label="gmd:individualName"/>
        <col label="gmd:electronicMailAddress"/>
        <col label="gmd:role"/>
        <col/>
      </header>
      <row>
        <col xpath="gmd:organisationName"/>
        <col xpath="gmd:individualName"/>
        <col xpath="gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress"/>
        <col xpath="gmd:role"/>
        <col del=".."/>
      </row>
    </table>
    <table for="gmd:CI_OnlineResource">
      <header>
        <col label="gmd:protocol"/>
        <col label="gmd:linkage"/>
        <col label="gmd:name"/>
        <col/>
      </header>
      <row>
        <col xpath="gmd:protocol"/>
        <col xpath="gmd:linkage"/>
        <col xpath="gmd:name"/>
        <col del=".."/>
      </row>
    </table>
    <table for="srv:SV_OperationMetadata">
      <header>
        <col label="srv:operationName"/>
        <col label="srv:DCP"/>
        <col label="srv:connectPoint"/>
        <col/>
      </header>
      <row>
        <col xpath="srv:operationName"/>
        <col xpath="srv:DCP"/>
        <col xpath="srv:connectPoint/gmd:CI_OnlineResource/gmd:linkage"/>
        <col del=".."/>
        <section xpath="srv:SV_OperationMetadata/srv:parameters"
                 or="parameters" in="srv:SV_OperationMetadata"/>
      </row>
    </table>
    <table for="srv:SV_CoupledResource">
      <header>
        <col label="srv:operationName"/>
        <col label="srv:identifier"/>
        <col label="gco:ScopedName"/>
        <col/>
      </header>
      <row>
        <col xpath="srv:operationName"/>
        <col xpath="srv:identifier"/>
        <col xpath="gco:ScopedName"/>
        <col del=".."/>
      </row>
    </table>
    <table for="gmd:MD_Format">
      <header>
        <col label="gmd:name"/>
        <col label="gmd:version"/>
        <col/>
      </header>
      <row>
        <col xpath="gmd:name"/>
        <col xpath="gmd:version"/>
        <col del=".."/>
      </row>
    </table>
    <table for="gmd:PT_Locale">
      <header>
        <col label="gmd:languageCode"/>
        <col label="gmd:characterEncoding"/>
        <col/>
      </header>
      <row>
        <col xpath="gmd:languageCode"/>
        <col xpath="gmd:characterEncoding"/>
        <col del=".."/>
      </row>
    </table>
  </tableFields>

  <!-- View configuration -->
  <views>

    <!--DGIWG VIEW -->
    <view name="dgiwg" upAndDownControlHidden="true">
        <sidePanel>
            <directive data-gn-onlinesrc-list=""/>
            <directive data-gn-validation-report=""/>
            <directive data-gn-suggestion-list=""/>
            <directive data-gn-need-help="user-guide/describing-information/creating-metadata.html"/>
        </sidePanel>

        <!-- TAB DMF CORE ========================================================================================== -->

        <tab id="DMFcore" default="true" mode="flat">
            <section name="metadata">
                <field xpath="/gmd:MD_Metadata/gmd:fileIdentifier"/>
                <field xpath="/gmd:MD_Metadata/gmd:language" or="language" in="/gmd:MD_Metadata"/>
                <field xpath="/gmd:MD_Metadata/gmd:characterSet"/>

                <field xpath="/gmd:MD_Metadata/gmd:dateStamp"/>
                <field xpath="/gmd:MD_Metadata/gmd:metadataStandardName" />
                <field xpath="/gmd:MD_Metadata/gmd:metadataStandardVersion"/>
                <field xpath="/gmd:MD_Metadata/gmd:contact" or="contact" in="/gmd:MD_Metadata"/>
            </section>

            <!-- SECTION: IDENTIFICATION =========================================================================== -->

            <section name="identificationInfo">

                <!-- Metadata title -->
                <field
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/gmd:CI_Citation/gmd:title"/>

                <!-- Metadata abstract -->
                <field
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:abstract"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0"/>
                <field
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:abstract"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0"/>

                <!-- purpose -->
                <field
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:purpose"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0"/>
                <field
                  xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:purpose"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0"/>

                <action type="add"
                        name="purpose"
                        btnLabel="purpose"
                        if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0 and
                            count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:purpose) = 0"
                        or="purpose" in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification">
                    <template>
                        <snippet>
                            <gmd:purpose gco:nilReason="missing">
                               <gco:CharacterString/>
                            </gmd:purpose>
                        </snippet>
                    </template>
                </action>

                <action type="add"
                        name="purpose"
                        btnLabel="purpose"
                        if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0 and
                            count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:purpose) = 0"
                        or="purpose" in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification">
                    <template>
                        <snippet>
                            <gmd:purpose gco:nilReason="missing">
                               <gco:CharacterString/>
                            </gmd:purpose>
                        </snippet>
                    </template>
                </action>

                <!-- Hierarchy Level -->
                <field xpath="/gmd:MD_Metadata/gmd:hierarchyLevel" />

                <action type="add" btnLabel="hierarchyLevel"
                        name="hierarchyLevel"
                        if="(count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) = 0 and count(gmd:MD_Metadata/gmd:hierarchyLevel) = 0)"
                        or="hierarchyLevel" in="/gmd:MD_Metadata">
                  <template>
                    <snippet>
                      <gmd:hierarchyLevel>
                        <gmd:MD_ScopeCode
                          codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_ScopeCode"
                          codeListValue="dataset"/>
                      </gmd:hierarchyLevel>
                    </snippet>
                  </template>
                </action>

                <action type="add" btnLabel="hierarchyLevel"
                        name="hierarchyLevel" or="hierarchyLevel"
                        if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0 and count(gmd:MD_Metadata/gmd:hierarchyLevel) = 0"
                        in="/gmd:MD_Metadata">
                  <template>
                    <snippet>
                      <gmd:hierarchyLevel>
                        <gmd:MD_ScopeCode
                          codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_ScopeCode"
                          codeListValue="service"/>
                      </gmd:hierarchyLevel>
                    </snippet>
                  </template>
                </action>

                <field xpath="/gmd:MD_Metadata/gmd:hierarchyLevelName" or="hierarchyLevelName"
                       in="/gmd:MD_Metadata"/>

                <!-- Edition-->
                <field
                    xpath = "/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:citation/gmd:CI_Citation/gmd:edition"
                    in =    "/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:citation/gmd:CI_Citation" or = "edition"
                    if=     "count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0"/>
                <field
                    xpath = "/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:citation/gmd:CI_Citation/gmd:editionDate"
                    in =    "/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:citation/gmd:CI_Citation" or = "editionDate"
                    if=     "count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0"/>

                <field
                    xpath = "/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:citation/gmd:CI_Citation/gmd:edition"
                    in =    "/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:citation/gmd:CI_Citation" or = "edition"
                    if=     "count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0"/>
                <field
                    xpath = "/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:citation/gmd:CI_Citation/gmd:editionDate"
                    in =    "/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:citation/gmd:CI_Citation" or = "editionDate"
                    if=     "count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0"/>

                <!-- Identifier -->
                <field
                    xpath = "/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:citation/gmd:CI_Citation/gmd:identifier"
                    if=     "count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0"/>
<!--                in =    "/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:citation/gmd:CI_Citation"  or = "identifier"/>-->
                <field
                    xpath = "/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:citation/gmd:CI_Citation/gmd:identifier"
                    if=     "count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0"/>


                <!-- KEYWORDS -->

                <!-- Keywords from other thesaurus than NGMP ones -->
                <field
                    xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords
                            [count(gmd:MD_Keywords/gmd:thesaurusName) > 0
                             and not(starts-with(gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:identifier/gmd:MD_Identifier/gmd:code/*/text(), 'geonetwork.thesaurus.external.theme.NGMP_'))]"/>

                <section name="freeTextKeywords">
                    <!-- Keywords without thesaurus information of type theme -->
                    <field
                        xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/
                                gmd:descriptiveKeywords[not(gmd:MD_Keywords/gmd:thesaurusName)]"
                        or="descriptiveKeywords"
                        in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"/>

                    <field
                        xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/
                                gmd:descriptiveKeywords[not(gmd:MD_Keywords/gmd:thesaurusName)]"
                        or="descriptiveKeywords"
                        in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification"/>
                </section>


                <field
                    xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:graphicOverview"
                    or="graphicOverview"
                    in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification"/>

               <!-- SPATIAL RESOLUTION -->

                <field
                    xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:spatialResolution/*
                                /gmd:equivalentScale/*/gmd:denominator"
                    del="../../../.."/>

                <action type="add" btnLabel="spatialResolution" or="spatialResolution"
                        in="/gmd:MD_Metadata/gmd:identificationInfo/*">
                    <template>
                        <snippet>
                            <gmd:spatialResolution>
                                <gmd:MD_Resolution>
                                    <gmd:equivalentScale>
                                        <gmd:MD_RepresentativeFraction>
                                            <gmd:denominator>
                                                <gco:Integer/>
                                            </gmd:denominator>
                                        </gmd:MD_RepresentativeFraction>
                                    </gmd:equivalentScale>
                                </gmd:MD_Resolution>
                            </gmd:spatialResolution>
                        </snippet>
                    </template>
                </action>

                <field
                    xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:spatialResolution/*/gmd:distance"
                    del="../.."/>

                <action type="add"
                        btnLabel="spatialDistance"
                        or="spatialResolution"
                        in="/gmd:MD_Metadata/gmd:identificationInfo/*">
                    <template>
                        <snippet>
                            <gmd:spatialResolution>
                                <gmd:MD_Resolution>
                                    <gmd:distance>
                                        <gco:Distance uom="m"/>
                                    </gmd:distance>
                                </gmd:MD_Resolution>
                            </gmd:spatialResolution>
                        </snippet>
                    </template>
                </action>

                <!-- Spatial representation type -->
                <field
                    xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:spatialRepresentationType" />

                <action type="add" btnLabel="spatialRepresentationType"
                        name="spatialRepresentationType" or="spatialRepresentationType"
                        in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification"
                        if = "count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:spatialRepresentationType) = 0">
                    <template>
                        <snippet>
                            <gmd:spatialRepresentationType>
                                <gmd:MD_SpatialRepresentationTypeCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_SpatialRepresentationTypeCode"
                                                                      codeListValue="vector"/>
                            </gmd:spatialRepresentationType>
                        </snippet>
                    </template>
                </action>

                <!-- Topic category -->
                <field
                    notDisplayedIfMissing="true"
                    xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:topicCategory" />

                <action type="add" btnLabel="topicCategory"
                        name="topicCategory" or="topicCategory"
                        in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification"
                        if = "count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:topicCategory) = 0">
                    <template>
                        <snippet>
                            <gmd:topicCategory>
                                <gmd:MD_TopicCategoryCode></gmd:MD_TopicCategoryCode>
                            </gmd:topicCategory>
                        </snippet>
                    </template>
                </action>
            </section>

            <!-- SECTION: SPATIO TEMPORAL ========================================================================== -->

            <section name="sec_spatio_temporal">
                <section name="bboxesSection">
                    <field
                        xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/
                      srv:extent/gmd:EX_Extent/gmd:geographicElement/gmd:EX_GeographicBoundingBox"/>
                    <field
                        xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/
                      gmd:extent/gmd:EX_Extent/gmd:geographicElement/gmd:EX_GeographicBoundingBox"/>

                    <action type="add" name="extent" or="extent" btnLabel="extent"
                            in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification">
                        <template>
                            <snippet>
                                <gmd:extent>
                                    <gmd:EX_Extent>
                                        <gmd:geographicElement>
                                            <gmd:EX_GeographicBoundingBox>
                                                <gmd:westBoundLongitude>
                                                    <gco:Decimal/>
                                                </gmd:westBoundLongitude>
                                                <gmd:eastBoundLongitude>
                                                    <gco:Decimal/>
                                                </gmd:eastBoundLongitude>
                                                <gmd:southBoundLatitude>
                                                    <gco:Decimal/>
                                                </gmd:southBoundLatitude>
                                                <gmd:northBoundLatitude>
                                                    <gco:Decimal/>
                                                </gmd:northBoundLatitude>
                                            </gmd:EX_GeographicBoundingBox>
                                        </gmd:geographicElement>
                                    </gmd:EX_Extent>
                                </gmd:extent>
                            </snippet>
                        </template>
                    </action>

                    <action type="add" name="extent" or="extent"  btnLabel="extent"
                            in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification">
                        <template>
                            <snippet>
                                <srv:extent>
                                    <gmd:EX_Extent>
                                        <gmd:geographicElement>
                                            <gmd:EX_GeographicBoundingBox>
                                                <gmd:westBoundLongitude>
                                                    <gco:Decimal/>
                                                </gmd:westBoundLongitude>
                                                <gmd:eastBoundLongitude>
                                                    <gco:Decimal/>
                                                </gmd:eastBoundLongitude>
                                                <gmd:southBoundLatitude>
                                                    <gco:Decimal/>
                                                </gmd:southBoundLatitude>
                                                <gmd:northBoundLatitude>
                                                    <gco:Decimal/>
                                                </gmd:northBoundLatitude>
                                            </gmd:EX_GeographicBoundingBox>
                                        </gmd:geographicElement>
                                    </gmd:EX_Extent>
                                </srv:extent>
                            </snippet>
                        </template>
                    </action>

                    <field xpath="/gmd:MD_Metadata/gmd:referenceSystemInfo" or="referenceSystemInfo"
                           in="/gmd:MD_Metadata"/>
                </section>

                <section name="temporalSection">
                    <field name="temporalRangeSection" templateModeOnly="true" notDisplayedIfMissing="true"
                           xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:extent/gmd:EX_Extent/gmd:temporalElement"
                           if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0">
                        <template>
                            <values>
                                <!-- Need a * for gml:TimePeriodTypeCHOICE_ELEMENT2 added by editor enumerated tree -->
                                <key label="beginPosition"
                                     xpath="gmd:EX_TemporalExtent/gmd:extent/gml:TimePeriod/*/gml:beginPosition"
                                     use="gn-date-picker"
                                     tooltip="gmd:extent|gmd:EX_TemporalExtent">
                                    <directiveAttributes
                                        data-tag-name="gml:beginPosition"
                                        data-indeterminate-position="eval#gmd:EX_TemporalExtent/gmd:extent/gml:TimePeriod/*/gml:beginPosition/@indeterminatePosition"/>

                                </key>
                                <key label="endPosition"
                                     xpath="gmd:EX_TemporalExtent/gmd:extent/gml:TimePeriod/*/gml:endPosition"
                                     use="gn-date-picker"
                                     tooltip="gmd:extent|gmd:EX_TemporalExtent">
                                    <directiveAttributes
                                        data-tag-name="gml:endPosition"
                                        data-indeterminate-position="eval#gmd:EX_TemporalExtent/gmd:extent/gml:TimePeriod/*/gml:endPosition/@indeterminatePosition"/>
                                </key>
                            </values>
                            <snippet>
                                <gmd:temporalElement>
                                    <gmd:EX_TemporalExtent>
                                        <gmd:extent>
                                            <gml:TimePeriod gml:id="">
                                                {{beginPosition}}
                                                {{endPosition}}
                                            </gml:TimePeriod>
                                        </gmd:extent>
                                    </gmd:EX_TemporalExtent>
                                </gmd:temporalElement>
                            </snippet>
                        </template>
                    </field>

                    <action type="add" name="extent" or="extent" btnLabel="temporalRangeSection"
                            in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification"
                            if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:extent/gmd:EX_Extent/gmd:temporalElement) = 0">
                        <template>
                            <snippet>
                                <gmd:extent>
                                    <gmd:EX_Extent>
                                        <gmd:temporalElement>
                                            <gmd:EX_TemporalExtent>
                                                <gmd:extent>
                                                    <gml:TimePeriod gml:id="">
                                                        <gml:beginPosition/>
                                                        <gml:endPosition/>
                                                    </gml:TimePeriod>
                                                </gmd:extent>
                                            </gmd:EX_TemporalExtent>
                                        </gmd:temporalElement>
                                    </gmd:EX_Extent>
                                </gmd:extent>
                            </snippet>
                        </template>
                    </action>

                    <field name="temporalRangeSection" templateModeOnly="true" notDisplayedIfMissing="true"
                           xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/srv:extent/gmd:EX_Extent/gmd:temporalElement"
                           if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0">
                        <template>
                            <values>
                                <!-- Need a * for gml:TimePeriodTypeCHOICE_ELEMENT2 added by editor enumerated tree -->
                                <key label="beginPosition"
                                     xpath="gmd:EX_TemporalExtent/gmd:extent/gml:TimePeriod/*/gml:beginPosition"
                                     use="gn-date-picker"
                                     tooltip="gmd:extent|gmd:EX_TemporalExtent">
                                    <directiveAttributes data-tag-name="gml:beginPosition"/>
                                </key>
                                <key label="endPosition"
                                     xpath="gmd:EX_TemporalExtent/gmd:extent/gml:TimePeriod/*/gml:endPosition"
                                     use="gn-date-picker"
                                     tooltip="gmd:extent|gmd:EX_TemporalExtent">
                                    <directiveAttributes
                                        data-tag-name="gml:endPosition"/>
                                </key>

                            </values>
                            <snippet>
                                <gmd:temporalElement>
                                    <gmd:EX_TemporalExtent>
                                        <gmd:extent>
                                            <gml:TimePeriod gml:id="">
                                                {{beginPosition}}
                                                {{endPosition}}
                                            </gml:TimePeriod>
                                        </gmd:extent>
                                    </gmd:EX_TemporalExtent>
                                </gmd:temporalElement>
                            </snippet>
                        </template>
                    </field>

                    <action type="add" name="extent" or="extent" btnLabel="temporalRangeSection"
                            in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                            if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/srv:extent/gmd:EX_Extent/gmd:temporalElement) = 0">
                        <template>
                            <snippet>
                                <srv:extent>
                                    <gmd:EX_Extent>
                                        <gmd:temporalElement>
                                            <gmd:EX_TemporalExtent>
                                                <gmd:extent>
                                                    <gml:TimePeriod gml:id="">
                                                        <gml:beginPosition/>
                                                        <gml:endPosition/>
                                                    </gml:TimePeriod>
                                                </gmd:extent>
                                            </gmd:EX_TemporalExtent>
                                        </gmd:temporalElement>
                                    </gmd:EX_Extent>
                                </srv:extent>
                            </snippet>
                        </template>
                    </action>
                </section>
            </section>

            <!-- SECTION: MANAGEMENT =============================================================================== -->

            <section name="sec_management">
                <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/gmd:CI_Citation/gmd:date"/>

                <action type="add" name="referenceDate" btnLabel="referenceDate"
                        or="date"
                        in="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/gmd:CI_Citation">
                  <template>
                    <snippet>
                      <gmd:date>
                        <gmd:CI_Date>
                          <gmd:date>
                            <gco:Date></gco:Date>
                          </gmd:date>
                          <gmd:dateType>
                            <gmd:CI_DateTypeCode
                              codeList="http://www.isotc211.org/2005/resources/codeList.xml#CI_DateTypeCode"
                              codeListValue="revision"/>
                          </gmd:dateType>
                        </gmd:CI_Date>
                      </gmd:date>
                    </snippet>
                  </template>
                </action>

                <!-- Responsible organisation - datasets -->
                <section name="responsibleOrganisationSection"
                         displayIfRecord="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0">

                    <field name="pointOfContact" templateModeOnly="true" notDisplayedIfMissing="true"
                           forceLabel="true"
                           xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:pointOfContact"
                           del=".">
                        <template>
                            <values readonlyIf="count(@xlink:href) > 0">
                                <key label="organisationName"
                                     tooltip="gmd:organisationName"
                                     xpath="gmd:CI_ResponsibleParty/gmd:organisationName/gco:CharacterString"/>
                                <key label="electronicMailAddress"
                                     tooltip="gmd:electronicMailAddress"
                                     xpath="gmd:CI_ResponsibleParty/gmd:contactInfo/gmd:CI_Contact/gmd:address/gmd:CI_Address/gmd:electronicMailAddress/gco:CharacterString"
                                     use="email"/>
                                <key label="role"
                                     tooltip="gmd:role"
                                     xpath="gmd:CI_ResponsibleParty/gmd:role/gmd:CI_RoleCode/@codeListValue">
                                    <codelist name="gmd:CI_RoleCode"/>
                                </key>
                            </values>
                            <snippet>
                                <gmd:pointOfContact>
                                    <gmd:CI_ResponsibleParty>
                                        <gn:copy select="gmd:individualName"/>
                                        <gmd:organisationName>
                                            <gco:CharacterString>{{organisationName}}</gco:CharacterString>
                                            <gn:copy select="gmd:PT_FreeText"/>
                                        </gmd:organisationName>
                                        <gn:copy select="gmd:positionName"/>
                                        <gmd:contactInfo>
                                            <gmd:CI_Contact>
                                                <gn:copy select="gmd:phone"/>
                                                <gmd:address>
                                                    <gmd:CI_Address>
                                                        <gn:copy select="gmd:deliveryPoint"/>
                                                        <gn:copy select="gmd:city"/>
                                                        <gn:copy select="gmd:administrativeArea"/>
                                                        <gn:copy select="gmd:postalCode"/>
                                                        <gn:copy select="gmd:country"/>
                                                        <gmd:electronicMailAddress>
                                                            <gco:CharacterString>{{electronicMailAddress}}</gco:CharacterString>
                                                            <gn:copy select="gmd:PT_FreeText"/>
                                                        </gmd:electronicMailAddress>
                                                    </gmd:CI_Address>
                                                </gmd:address>
                                                <gn:copy select="gmd:onlineResource"/>
                                                <gn:copy select="gmd:hoursOfService"/>
                                                <gn:copy select="gmd:contactInstructions"/>
                                            </gmd:CI_Contact>
                                        </gmd:contactInfo>
                                        <gmd:role>
                                            <gmd:CI_RoleCode
                                                codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#CI_RoleCode"
                                                codeListValue="{{role}}"/>
                                        </gmd:role>
                                    </gmd:CI_ResponsibleParty>
                                </gmd:pointOfContact>
                            </snippet>
                        </template>
                    </field>

                    <action type="add" name="pointOfContact" btnClass="fa fa-user-plus"
                            or="pointOfContact"
                            in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification">
                        <template>
                            <snippet>
                                <gmd:pointOfContact>
                                    <gmd:CI_ResponsibleParty>
                                        <gmd:organisationName gco:nilReason="missing">
                                            <gco:CharacterString/>
                                        </gmd:organisationName>
                                        <gmd:contactInfo>
                                            <gmd:CI_Contact>
                                                <gmd:address>
                                                    <gmd:CI_Address>
                                                        <gmd:electronicMailAddress gco:nilReason="missing">
                                                            <gco:CharacterString/>
                                                        </gmd:electronicMailAddress>
                                                    </gmd:CI_Address>
                                                </gmd:address>
                                            </gmd:CI_Contact>
                                        </gmd:contactInfo>
                                        <gmd:role>
                                            <gmd:CI_RoleCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#CI_RoleCode"
                                                             codeListValue="resourceProvider"/>
                                        </gmd:role>
                                    </gmd:CI_ResponsibleParty>
                                </gmd:pointOfContact>
                            </snippet>
                        </template>
                    </action>
                </section>

                <!-- Responsible organisation - serviceType != other -->
                <!-- For serviceType = other it's available in SDS tab -->
                <section name="responsibleOrganisationSection"
                         displayIfRecord="(count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) +
                         count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/srv:serviceType[gco:LocalName = 'other'])) = 1">
                    <field name="pointOfContact" templateModeOnly="true" notDisplayedIfMissing="true"
                           xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:pointOfContact"
                           del=".">
                        <template>
                            <values readonlyIf="count(@xlink:href) > 0">
                                <key label="organisationName"
                                     tooltip="gmd:organisationName"
                                     xpath="gmd:CI_ResponsibleParty/gmd:organisationName/gco:CharacterString"/>
                                <key label="electronicMailAddress"
                                     tooltip="gmd:electronicMailAddress"
                                     xpath="gmd:CI_ResponsibleParty/gmd:contactInfo/gmd:CI_Contact/gmd:address/gmd:CI_Address/gmd:electronicMailAddress/gco:CharacterString"
                                     use="email"/>
                                <key label="role"
                                     tooltip="gmd:role"
                                     xpath="gmd:CI_ResponsibleParty/gmd:role/gmd:CI_RoleCode/@codeListValue">
                                    <codelist name="gmd:CI_RoleCode"/>
                                </key>
                            </values>
                            <snippet>
                                <gmd:pointOfContact>
                                    <gmd:CI_ResponsibleParty>
                                        <gn:copy select="gmd:individualName"/>
                                        <gmd:organisationName>
                                            <gco:CharacterString>{{organisationName}}</gco:CharacterString>
                                            <gn:copy select="gmd:PT_FreeText"/>
                                        </gmd:organisationName>
                                        <gn:copy select="gmd:positionName"/>
                                        <gmd:contactInfo>
                                            <gmd:CI_Contact>
                                                <gn:copy select="gmd:phone"/>
                                                <gmd:address>
                                                    <gmd:CI_Address>
                                                        <gn:copy select="gmd:deliveryPoint"/>
                                                        <gn:copy select="gmd:city"/>
                                                        <gn:copy select="gmd:administrativeArea"/>
                                                        <gn:copy select="gmd:postalCode"/>
                                                        <gn:copy select="gmd:country"/>
                                                        <gmd:electronicMailAddress>
                                                            <gco:CharacterString>{{electronicMailAddress}}</gco:CharacterString>
                                                            <gn:copy select="gmd:PT_FreeText"/>
                                                        </gmd:electronicMailAddress>
                                                    </gmd:CI_Address>
                                                </gmd:address>
                                                <gn:copy select="gmd:onlineResource"/>
                                                <gn:copy select="gmd:hoursOfService"/>
                                                <gn:copy select="gmd:contactInstructions"/>
                                            </gmd:CI_Contact>
                                        </gmd:contactInfo>
                                        <gmd:role>
                                            <gmd:CI_RoleCode
                                                codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#CI_RoleCode"
                                                codeListValue="{{role}}"/>
                                        </gmd:role>
                                    </gmd:CI_ResponsibleParty>
                                </gmd:pointOfContact>
                            </snippet>
                        </template>
                    </field>


                    <action type="add" name="pointOfContact" btnClass="fa fa-user-plus"
                            or="pointOfContact"
                            in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification">
                        <template>
                            <snippet>
                                <gmd:pointOfContact>
                                    <gmd:CI_ResponsibleParty>
                                        <gmd:organisationName gco:nilReason="missing">
                                            <gco:CharacterString/>
                                        </gmd:organisationName>
                                        <gmd:contactInfo>
                                            <gmd:CI_Contact>
                                                <gmd:address>
                                                    <gmd:CI_Address>
                                                        <gmd:electronicMailAddress gco:nilReason="missing">
                                                            <gco:CharacterString/>
                                                        </gmd:electronicMailAddress>
                                                    </gmd:CI_Address>
                                                </gmd:address>
                                            </gmd:CI_Contact>
                                        </gmd:contactInfo>
                                        <gmd:role>
                                            <gmd:CI_RoleCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#CI_RoleCode"
                                                             codeListValue="resourceProvider"/>
                                        </gmd:role>
                                    </gmd:CI_ResponsibleParty>
                                </gmd:pointOfContact>
                            </snippet>
                        </template>
                    </action>
                </section>
            </section>

            <!-- SECTION CONSTRAINTS ========================================================================== DATA -->

            <section name="sec_constraint"
                     displayIfRecord="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0">

                <!-- SECURITY CONSTRAINTS -->

                <field name="sec_security_constraint"
                       notDisplayedIfMissing="true"
                       templateModeOnly="true"
                       forceLabel="true"
                       xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:resourceConstraints/gmd:MD_SecurityConstraints"
                       or="MD_SecurityConstraints" in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:resourceConstraints"
                       del="..">
                    <template>
                        <values readonlyIf="count(@xlink:href) > 0">
                            <key label="sec_classlevel"   xpath="gmd:classification/gmd:MD_ClassificationCode/@codeListValue" tooltip="gmd:classification">
                                <codelist name="gmd:MD_ClassificationCode"/>
                            </key>
                            <key label="sec_classsystem"  xpath="gmd:classificationSystem/gco:CharacterString" tooltip="gmd:classificationSystem"/>
                        </values>
                        <snippet>
                            <gmd:MD_SecurityConstraints>
                                <gn:copy select="gmd:useLimitation"/>
                               <gmd:classification>
                                  <gmd:MD_ClassificationCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/Codelist/ML_gmxCodelists.xml#MD_ClassificationCode"
                                                             codeListValue="{{sec_classlevel}}">{{sec_classlevel}}</gmd:MD_ClassificationCode>
                               </gmd:classification>
                               <gn:copy select="gmd:userNote"/>
                               <gmd:classificationSystem>
                                  <gco:CharacterString>{{sec_classsystem}}</gco:CharacterString>
                               </gmd:classificationSystem>
                               <gn:copy select="gmd:handlingDescription"/>
                            </gmd:MD_SecurityConstraints>
                        </snippet>
                    </template>
                </field>

                <action type="add" name="sec_security_constraint"
                        btnLabel="add_sec_constraint" btnClass="fa fa-plus"
                        or="resourceConstraints"
                        in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification"
                        >
                    <template>
                        <snippet>
                            <gmd:resourceConstraints>
                                <gmd:MD_SecurityConstraints>
                                    <gmd:useLimitation gco:nilReason="missing">
                                       <gco:CharacterString/>
                                    </gmd:useLimitation>
                                   <gmd:classification>
                                      <gmd:MD_ClassificationCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/Codelist/ML_gmxCodelists.xml#MD_ClassificationCode"
                                                                 codeListValue=""></gmd:MD_ClassificationCode>
                                   </gmd:classification>
                                    <gmd:userNote gco:nilReason="missing">
                                       <gco:CharacterString/>
                                    </gmd:userNote>
                                    <gmd:classificationSystem gco:nilReason="missing">
                                       <gco:CharacterString/>
                                    </gmd:classificationSystem>
                                    <gmd:handlingDescription gco:nilReason="missing">
                                       <gco:CharacterString/>
                                    </gmd:handlingDescription>
                                </gmd:MD_SecurityConstraints>
                            </gmd:resourceConstraints>
                        </snippet>
                    </template>
                </action>

                <!-- Use limitation -->

                <section name="restrictionsSection"
                         displayIfRecord="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0">

                    <field
                        xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:resourceConstraints/gmd:MD_Constraints/gmd:useLimitation"
                        if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0"
                        del="../.." />

                    <action type="add"
                            name="useLimitation" btnLabel="add_use_limitation"
                            or="resourceConstraints"
                            in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification"
                            if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0">
                        <template>
                            <snippet>
                                <gmd:resourceConstraints>
                                    <gmd:MD_Constraints>
                                        <gmd:useLimitation>
                                            <gco:CharacterString/>
                                        </gmd:useLimitation>
                                    </gmd:MD_Constraints>
                                </gmd:resourceConstraints>
                            </snippet>
                        </template>
                    </action>
                </section>

                <!-- LEGAL CONSTRAINTS -->

                <section name="sec_legal_constraint">

                    <!-- We're mapping 5.4.2.23 statement as uslimitation since that's the only free text usable field -->

                    <field templateModeOnly="true" name="sec_legal_statement"
                           notDisplayedIfMissing="true"
                           xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints"
                           or="MD_LegalConstraints" in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:resourceConstraints"
                           del="..">
                        <template>
                            <values readonlyIf="count(@xlink:href) > 0">
                                <key label="sec_legal_statement"   xpath="gmd:useLimitation/gco:CharacterString"/>
                            </values>
                            <snippet>
                                <gmd:MD_LegalConstraints>
                                            <gmd:useLimitation>
                                                <gco:CharacterString>{{sec_legal_statement}}</gco:CharacterString>
                                            </gmd:useLimitation>
                                    <gn:copy select="gmd:accessConstraints"/>
                                    <gn:copy select="gmd:useConstraints"/>
                                    <gn:copy select="gmd:otherConstraints"/>
                                </gmd:MD_LegalConstraints>
                            </snippet>
                        </template>
                    </field>

                    <action type="add" name="sec_legal_constraint"
                            btnLabel="add_legal_constraint" btnClass="fa fa-plus"
                            or="resourceConstraints"
                            in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification"
                            >
                        <template>
                            <snippet>
                                <gmd:resourceConstraints>
                                    <gmd:MD_LegalConstraints>
                                        <gmd:useLimitation gco:nilReason="missing">
                                           <gco:CharacterString/>
                                        </gmd:useLimitation>
                                    </gmd:MD_LegalConstraints>
                                </gmd:resourceConstraints>
                            </snippet>
                        </template>
                    </action>
                </section>

            </section>

            <!-- SECTION CONSTRAINTS ====================================================================== SERVICES -->

            <!-- mostly equals to the data section - only indentificationInfo class is different-->

            <section name="sec_constraint"
                     displayIfRecord="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0">

                <!-- SECURITY CONSTRAINTS -->

                <field name="sec_security_constraint"
                       notDisplayedIfMissing="true"
                       templateModeOnly="true"
                       forceLabel="true"
                       xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_SecurityConstraints"
                       or="MD_SecurityConstraints" in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints"
                       del="..">
                    <template>
                        <values readonlyIf="count(@xlink:href) > 0">
                            <key label="sec_classlevel"   xpath="gmd:classification/gmd:MD_ClassificationCode/@codeListValue" tooltip="gmd:classification">
                                <codelist name="gmd:MD_ClassificationCode"/>
                            </key>
                            <key label="sec_classsystem"  xpath="gmd:classificationSystem/gco:CharacterString" tooltip="gmd:classificationSystem"/>
                        </values>
                        <snippet>
                            <gmd:MD_SecurityConstraints>
                                <gn:copy select="gmd:useLimitation"/>
                               <gmd:classification>
                                  <gmd:MD_ClassificationCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/Codelist/ML_gmxCodelists.xml#MD_ClassificationCode"
                                                             codeListValue="{{sec_classlevel}}">{{sec_classlevel}}</gmd:MD_ClassificationCode>
                               </gmd:classification>
                               <gn:copy select="gmd:userNote"/>
                               <gmd:classificationSystem>
                                  <gco:CharacterString>{{sec_classsystem}}</gco:CharacterString>
                               </gmd:classificationSystem>
                               <gn:copy select="gmd:handlingDescription"/>
                            </gmd:MD_SecurityConstraints>
                        </snippet>
                    </template>
                </field>

                <action type="add" name="sec_security_constraint"
                        btnLabel="add_sec_constraint" btnClass="fa fa-plus"
                        or="resourceConstraints"
                        in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                        >
                    <template>
                        <snippet>
                            <gmd:resourceConstraints>
                                <gmd:MD_SecurityConstraints>
                                    <gmd:useLimitation gco:nilReason="missing">
                                       <gco:CharacterString/>
                                    </gmd:useLimitation>
                                   <gmd:classification>
                                      <gmd:MD_ClassificationCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/Codelist/ML_gmxCodelists.xml#MD_ClassificationCode"
                                                                 codeListValue=""></gmd:MD_ClassificationCode>
                                   </gmd:classification>
                                    <gmd:userNote gco:nilReason="missing">
                                       <gco:CharacterString/>
                                    </gmd:userNote>
                                    <gmd:classificationSystem gco:nilReason="missing">
                                       <gco:CharacterString/>
                                    </gmd:classificationSystem>
                                    <gmd:handlingDescription gco:nilReason="missing">
                                       <gco:CharacterString/>
                                    </gmd:handlingDescription>
                                </gmd:MD_SecurityConstraints>
                            </gmd:resourceConstraints>
                        </snippet>
                    </template>
                </action>

                <!-- Use limitation -->

                <section name="restrictionsSection"
                         displayIfRecord="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0">

                    <field
                        xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_Constraints/gmd:useLimitation"
                        notDisplayedIfMissing="true"
                        if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0"
                        del="../.." />

                    <action type="add"
                            name="useLimitation" btnLabel="add_use_limitation"
                            or="resourceConstraints"
                            in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                            if="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0">
                        <template>
                            <snippet>
                                <gmd:resourceConstraints>
                                    <gmd:MD_Constraints>
                                        <gmd:useLimitation>
                                            <gco:CharacterString/>
                                        </gmd:useLimitation>
                                    </gmd:MD_Constraints>
                                </gmd:resourceConstraints>
                            </snippet>
                        </template>
                    </action>
                </section>

                <!-- LEGAL CONSTRAINTS -->

                <section name="sec_legal_constraint">

                    <!-- We're mapping 5.4.2.23 statement as uslimitation since that's the only free text usable field -->

                    <field templateModeOnly="true" name="sec_legal_statement"
                           notDisplayedIfMissing="true"
                           xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints/gmd:MD_LegalConstraints"
                           or="MD_LegalConstraints" in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:resourceConstraints"
                           del="..">
                        <template>
                            <values readonlyIf="count(@xlink:href) > 0">
                                <key label="sec_legal_statement"   xpath="gmd:useLimitation/gco:CharacterString"/>
                            </values>
                            <snippet>
                                <gmd:MD_LegalConstraints>
                                            <gmd:useLimitation>
                                                <gco:CharacterString>{{sec_legal_statement}}</gco:CharacterString>
                                            </gmd:useLimitation>
                                    <gn:copy select="gmd:accessConstraints"/>
                                    <gn:copy select="gmd:useConstraints"/>
                                    <gn:copy select="gmd:otherConstraints"/>
                                </gmd:MD_LegalConstraints>
                            </snippet>
                        </template>
                    </field>

                    <action type="add" name="sec_legal_constraint"
                            btnLabel="add_legal_constraint" btnClass="fa fa-plus"
                            or="resourceConstraints"
                            in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"
                            >
                        <template>
                            <snippet>
                                <gmd:resourceConstraints>
                                    <gmd:MD_LegalConstraints>
                                        <gmd:useLimitation gco:nilReason="missing">
                                           <gco:CharacterString/>
                                        </gmd:useLimitation>
                                    </gmd:MD_LegalConstraints>
                                </gmd:resourceConstraints>
                            </snippet>
                        </template>
                    </action>
                </section>

            </section>

            <!-- SECTION: DATA QUALITY ============================================================================= -->

            <section name="dataQualityInfo">

                <field name="lineage"
                       xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:lineage/gmd:LI_Lineage/gmd:statement"/>

                <action type="add" name="lineage" or="statement" btnLabel="lineage"
                        in="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:lineage/gmd:LI_Lineage">
                    <template>
                        <snippet>
                            <gmd:statement>
                                <gco:CharacterString>To be determined</gco:CharacterString>
                            </gmd:statement>
                        </snippet>
                    </template>
                </action>
                <action type="add" name="lineage" or="lineage" btnLabel="lineage"
                        in="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality">
                    <template>
                        <snippet>
                            <gmd:lineage>
                                <gmd:LI_Lineage>
                                    <gmd:statement>
                                        <gco:CharacterString>To be determined</gco:CharacterString>
                                    </gmd:statement>
                                </gmd:LI_Lineage>
                            </gmd:lineage>
                        </snippet>
                    </template>
                </action>


            </section>

            <!-- SECTION: DISTRIBUTION INFO ======================================================================== -->

            <section name="distributionInfo">

                <field name="distribution_format" templateModeOnly="true"
                       notDisplayedIfMissing="true" forceLabel="true"
                       xpath="/gmd:MD_Metadata/gmd:distributionInfo/gmd:MD_Distribution/gmd:distributionFormat"
                       del=".">
                    <template>
                        <values>
                            <key label="format_name"
                                 xpath="gmd:MD_Format/gmd:name/gco:CharacterString"
                                 tooltip="gmd:name|gmd:MD_Format">
                                <helper name="gmd:name" context="gmd:MD_Format"/>
                            </key>
                            <key label="format_version" xpath="gmd:MD_Format/gmd:version/gco:CharacterString" />
                            <key label="format_compression" xpath="gmd:MD_Format/gmd:fileDecompressionTechnique/gco:CharacterString" />
                        </values>
                        <snippet>
                            <gmd:distributionFormat>
                                <gmd:MD_Format>
                                    <gmd:name>
                                        <gco:CharacterString>{{format_name}}</gco:CharacterString>
                                        <gn:copy select="gmd:PT_FreeText"/>
                                    </gmd:name>
                                    <gmd:version>
                                        <gco:CharacterString>{{format_version}}</gco:CharacterString>
                                    </gmd:version>
                                    <gn:copy select="gmd:amendmentNumber"/>
                                    <gn:copy select="gmd:specification"/>
                                    <gmd:fileDecompressionTechnique>
                                        <gco:CharacterString>{{format_compression}}</gco:CharacterString>
                                    </gmd:fileDecompressionTechnique>
                                    <gn:copy select="gmd:formatDistributor"/>
                                </gmd:MD_Format>
                            </gmd:distributionFormat>
                        </snippet>
                    </template>
                </field>

                <action type="add"
                        name="distribution_format"
                        btnLabel="distribution_format"
                        or="distributionFormat"  in="/gmd:MD_Metadata/gmd:distributionInfo/gmd:MD_Distribution">
                    <template>
                        <snippet>
                            <gmd:distributionFormat>
                                <gmd:MD_Format>
                                    <gmd:name>
                                        <gco:CharacterString>To be determined</gco:CharacterString>
                                    </gmd:name>
                                    <gmd:version>
                                        <gco:CharacterString>To be determined</gco:CharacterString>
                                    </gmd:version>
                                    <gmd:fileDecompressionTechnique gco:nilReason="missing">
                                       <gco:CharacterString/>
                                    </gmd:fileDecompressionTechnique>
                                </gmd:MD_Format>
                            </gmd:distributionFormat>
                        </snippet>
                    </template>
                </action>

                <!-- Resource online location -->

                <!-- Links to resources -->
                <field name="resource_online_location"
                       forceLabel="true"
                       templateModeOnly="true"
                       notDisplayedIfMissing="true"
                       xpath="/gmd:MD_Metadata/gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions
                                /gmd:MD_DigitalTransferOptions/gmd:onLine"
                       del=".">
                    <template>
                        <values>
                            <key label="resource_url"      xpath="gmd:CI_OnlineResource/gmd:linkage/gmd:URL" tooltip="gmd:linkage" />
                            <key label="resource_function" xpath="gmd:CI_OnlineResource/gmd:function/gmd:CI_OnLineFunctionCode/@codeListValue" tooltip="gmd:CI_OnLineFunctionCode">
                                <codelist name="gmd:CI_OnLineFunctionCode"/>
                            </key>

                        </values>
                        <snippet>
                            <gmd:onLine>
                                <gmd:CI_OnlineResource>
                                    <gmd:linkage>
                                        <gmd:URL>{{resource_url}}</gmd:URL>
                                    </gmd:linkage>
                                    <gn:copy select="gmd:protocol"/>
                                    <gn:copy select="gmd:applicationProfile"/>
                                    <gn:copy select="gmd:name"/>
                                    <gn:copy select="gmd:description"/>
                                    <gmd:function>
                                        <gmd:CI_OnLineFunctionCode codeList="#" codeListValue="{{resource_function}}">{{resource_function}}</gmd:CI_OnLineFunctionCode>
                                    </gmd:function>

                                </gmd:CI_OnlineResource>
                            </gmd:onLine>
                        </snippet>
                    </template>
                </field>

                <action type="add" name="url"
                        btnLabel="add_online_location"
                        or="onLine"
                        in="/gmd:MD_Metadata/gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions">
                    <template>
                        <snippet>
                            <gmd:onLine>
                                <gmd:CI_OnlineResource>
                                    <gmd:linkage><gmd:URL /></gmd:linkage>
                                    <gmd:function>
                                        <gmd:CI_OnLineFunctionCode codeList="" codeListValue=""></gmd:CI_OnLineFunctionCode>
                                    </gmd:function>
                                </gmd:CI_OnlineResource>
                            </gmd:onLine>
                        </snippet>
                    </template>
                </action>

                <action type="add" name="url"
                        btnLabel="add_transfer_options"
                        or="transferOptions"
                        in="/gmd:MD_Metadata/gmd:distributionInfo/gmd:MD_Distribution"
                        if="count(gmd:MD_Metadata//gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions) = 0">
                    <template>
                        <snippet>
                            <gmd:transferOptions>
                                <gmd:MD_DigitalTransferOptions>
                                    <gmd:onLine>
                                        <gmd:CI_OnlineResource>
                                            <gmd:linkage>
                                                <gmd:URL />
                                            </gmd:linkage>
                                            <gmd:function>
                                                <gmd:CI_OnLineFunctionCode codeList="" codeListValue=""></gmd:CI_OnLineFunctionCode>
                                            </gmd:function>
                                        </gmd:CI_OnlineResource>
                                    </gmd:onLine>
                                </gmd:MD_DigitalTransferOptions>
                            </gmd:transferOptions>
                        </snippet>
                    </template>
                </action>


            </section>

        </tab>

        <!-- ======================================================================================================= -->
        <!-- TAB DMF CORE for DATA ================================================================================= -->
        <!-- ======================================================================================================= -->

        <tab id="DMFcoreData" mode="flat"
             displayIfRecord="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0">

            <section name="sec_data_identification">

                <section name="sec_locale">

                    <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:language"
                         or="language" in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification"/>

                    <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:characterSet"
                         or="characterSet" in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification"/>

                </section>

                <!-- NGMP codelists in thematic keywords -->
                <section name="sec_ngmp">

                    <field
                      xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords
                                [gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:identifier/gmd:MD_Identifier/gmd:code/*/text()
                                    ='geonetwork.thesaurus.external.theme.NGMP_GeospatialInformationTypeCode']"/>

                    <action type="add" name="GeospatialInformationTypeCode"
                            btnLabel="GeoSpat Info type code"
                            addDirective="data-gn-thesaurus-selector"
                            or="descriptiveKeywords"
                            in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification"
                            if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:descriptiveKeywords
                                [gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:identifier/gmd:MD_Identifier/gmd:code/*/text()
                                    ='geonetwork.thesaurus.external.theme.NGMP_GeospatialInformationTypeCode']) = 0">
                        <directiveAttributes
                              data-include="external.theme.NGMP_GeospatialInformationTypeCode"
                              data-allow-free-text-keywords="false"/>
                    </action>

                    <field
                      xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords
                                [gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:identifier/gmd:MD_Identifier/gmd:code/*/text()
                                    ='geonetwork.thesaurus.external.theme.NGMP_GeoreferencingLevelCode']"/>

                    <action type="add" name="GeoreferencingLevelCode"
                            btnLabel="Georef Level code"
                            addDirective="data-gn-thesaurus-selector"
                            or="descriptiveKeywords"
                            in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification"
                            if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:descriptiveKeywords
                                [gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:identifier/gmd:MD_Identifier/gmd:code/*/text()
                                    ='geonetwork.thesaurus.external.theme.NGMP_GeoreferencingLevelCode']) = 0">
                        <directiveAttributes
                              data-include="external.theme.NGMP_GeoreferencingLevelCode"
                              data-allow-free-text-keywords="false"/>
                    </action>

                    <field
                      xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords
                                [gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:identifier/gmd:MD_Identifier/gmd:code/*/text()
                                    ='geonetwork.thesaurus.external.theme.NGMP_RepresentationFormCode']"/>

                    <action type="add" name="RepresentationFormCode"
                            btnLabel="Repr form code"
                            addDirective="data-gn-thesaurus-selector"
                            or="descriptiveKeywords"
                            in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification"
                            if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:descriptiveKeywords
                                [gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:identifier/gmd:MD_Identifier/gmd:code/*/text()
                                    ='geonetwork.thesaurus.external.theme.NGMP_RepresentationFormCode']) = 0">
                        <directiveAttributes
                              data-include="external.theme.NGMP_RepresentationFormCode"
                              data-allow-free-text-keywords="false"/>
                    </action>

                    <field
                      xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords
                                [gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:identifier/gmd:MD_Identifier/gmd:code/*/text()
                                    ='geonetwork.thesaurus.external.theme.NGMP_ThematicCode']"/>

                    <action type="add" name="ThematicCode"
                            btnLabel="Codice tematico"
                            addDirective="data-gn-thesaurus-selector"
                            or="descriptiveKeywords"
                            in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification"
                            if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:descriptiveKeywords
                                [gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:identifier/gmd:MD_Identifier/gmd:code/*/text()
                                    ='geonetwork.thesaurus.external.theme.NGMP_ThematicCode']) = 0">
                        <directiveAttributes
                              data-include="external.theme.NGMP_ThematicCode"
                              data-allow-free-text-keywords="false"/>
                    </action>
                </section>

                <section name="sec_series">

            <!-- Nmae of resource series -->

<!--            <field
                xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:citation/gmd:CI_Citation/gmd:series/gmd:CI_Series/gmd:name"/>-->

                    <field name="series_name"
                           xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:citation/gmd:CI_Citation/gmd:series"
                           del=".">
                        <template>

                            <values>
                                <key label="series_name" xpath="gmd:CI_Series/gmd:name/gco:CharacterString" tooltip="gmd:CI_Series" />
                            </values>

                            <snippet>
                             <gmd:series>
                                <gmd:CI_Series>
                                   <gmd:name>
                                      <gco:CharacterString>{{series_name}}</gco:CharacterString>
                                   </gmd:name>
                                  <gn:copy select="gmd:issueIdentification"/>
                                  <gn:copy select="gmd:page"/>
                                </gmd:CI_Series>
                             </gmd:series>

                            </snippet>
                        </template>
                    </field>

                    <action type="add" name="series" btnClass="fa fa-plus"
                            or="series"
                            in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:citation/gmd:CI_Citation"
                            if="count(/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:citation/gmd:CI_Citation/gmd:series) = 0">
                        <template>
                            <snippet>
                                <gmd:series>
                                   <gmd:CI_Series>
                                      <gmd:name gco:nilReason="missing">
                                       <gco:CharacterString/>
                                      </gmd:name>
                                   </gmd:CI_Series>
                                </gmd:series>
                            </snippet>
                        </template>
                    </action>

                    <!-- Resource sheet name -->

                    <section name="resourcesheetinfo">

                        <field templateModeOnly="true"
                            xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:citation/gmd:CI_Citation/gmd:identifier/gmd:RS_Identifier[gmd:codeSpace/gco:CharacterString/text()!='']"
                            or="RS_Identifier"
                            in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:citation/gmd:CI_Citation/gmd:identifier"
                            del=".">

                            <template>
                                <values>
                                  <key label="resourcesheetcode"   xpath="gmd:code/gco:CharacterString"      xtooltip="gmd:code" />
                                  <key label="resourcesheetcspace" xpath="gmd:codeSpace/gco:CharacterString" xtooltip="gmd:codeSpace" />
                                </values>
                                <snippet>

                                    <gmd:identifier>
                                       <gmd:RS_Identifier>
                                          <gmd:code>
                                             <gco:CharacterString>resourcesheetcode</gco:CharacterString>
                                          </gmd:code>
                                          <gmd:codeSpace>
                                             <gco:CharacterString>resourcesheetcspace</gco:CharacterString>
                                          </gmd:codeSpace>
                                       </gmd:RS_Identifier>
                                    </gmd:identifier>

                                </snippet>
                            </template>
                        </field>

                    </section>
                </section>
            </section>
        </tab>

        <!-- ======================================================================================================= -->
        <!-- TAB SERVICES ========================================================================================== -->
        <!-- ======================================================================================================= -->

        <tab id="DMFservices" mode="flat"
            displayIfRecord="count(gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification) > 0">
            <section name="sec_srv_identification">


                <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/srv:serviceType"/>

                <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/srv:serviceTypeVersion"/>

                <!-- service standard -->

                <section name="serviceStandard">
                    <field
                        name = "serviceStandardName"
                        xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report/gmd:DQ_DomainConsistency/gmd:result[gmd:DQ_ConformanceResult/gmd:explanation/gco:CharacterString/text()='Service standard']/gmd:DQ_ConformanceResult/gmd:specification"
                        del="../../../..">
                    </field>

                    <action type="add"
                            name="serviceStandard"
                            btnLabel="addReportForServiceStandard"
                            if="count(gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report/gmd:DQ_DomainConsistency/gmd:result[gmd:DQ_ConformanceResult/gmd:explanation/gco:CharacterString/text()='Service standard']) = 0"
                            or="report"
                            in="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality">
                        <template>
                            <snippet>
                                <gmd:report>
                                    <gmd:DQ_DomainConsistency>
                                        <gmd:nameOfMeasure>
                                            <gco:CharacterString>Service standard compliancy</gco:CharacterString>
                                        </gmd:nameOfMeasure>
                                        <gmd:measureDescription>
                                            <gco:CharacterString>This describes the standard or profile the service is conformant to.</gco:CharacterString>
                                        </gmd:measureDescription>
                                        <gmd:result>
                                            <gmd:DQ_ConformanceResult>
                                                <gmd:specification>
                                                    <gmd:CI_Citation>
                                                        <gmd:title>
                                                            <gco:CharacterString>service standard name (e.g. DGIWG sub-profile)</gco:CharacterString>
                                                        </gmd:title>
                                                        <gmd:date>
                                                            <gmd:CI_Date>
                                                                <gmd:date/>
                                                                <gmd:dateType>
                                                                    <gmd:CI_DateTypeCode
                                                                        codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/Codelist/ML_gmxCodelists.xml#CI_DateTypeCode"
                                                                        codeListValue=""/>
                                                                </gmd:dateType>
                                                            </gmd:CI_Date>
                                                        </gmd:date>
                                                    </gmd:CI_Citation>
                                                </gmd:specification>
                                                <gmd:explanation>
                                                    <gco:CharacterString>Service standard</gco:CharacterString>
                                                </gmd:explanation>
                                                <gmd:pass>
                                                    <gco:Boolean>true</gco:Boolean>
                                                </gmd:pass>
                                            </gmd:DQ_ConformanceResult>
                                        </gmd:result>
                                    </gmd:DQ_DomainConsistency>
                                </gmd:report>
                            </snippet>
                        </template>
                    </action>
                </section>

                <!-- service coupling type -->

                <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/srv:couplingType"/>

                <!-- resource operated by service (operatedDataset) -->

                <section name="resourcesOperatedByService">

                    <field name="operated_dataset_id"
                           templateModeOnly="true"
                           notDisplayedIfMissing="true"

                           xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/srv:operatesOn"
                           del=".">
                        <template>
                            <values>
                                <key label="uuid"
                                     required="true"
                                     xpath="@uuidref"
                                     tooltip="srv:operatesOn">
                                </key>
                            </values>
                            <snippet>
                                <srv:operatesOn uuidref="{{uuid}}" />
                            </snippet>
                        </template>
                    </field>

                    <action type="add"
                            name="operated_dataset_id"
                            btnLabel="add_operated_dataset_id"
                            forceLabel="true"
                            or="operatesOn"
                            in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification">
                        <template>
                            <snippet>
                                <srv:operatesOn uuid="0000"/>
                            </snippet>
                        </template>
                    </action>

                </section>

                <!-- service operation (containsOperation) -->

                <section name="dgiwg_service_operations">

                    <field
                        name="dgiwg_service_operation"
                        forceLabel="true"
                        templateModeOnly="true"
                        xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/srv:containsOperations"
                        del="." >

                        <template>
                            <values>
                                <key
                                    label="dgiwg_sop_name"
                                    required="true"
                                    xpath="srv:SV_OperationMetadata/srv:operationName/gco:CharacterString" />
                                <key 
                                    label="dgiwg_sop_platform"
                                    required="true"
                                    xpath="srv:SV_OperationMetadata/srv:DCP/srv:DCPList/@codeListValue">
                                    <codelist name="srv:DCPList"/>
                                </key>
                                <key
                                    label="dgiwg_sop_url"
                                    required="true"
                                    xpath="srv:SV_OperationMetadata/srv:connectPoint/gmd:CI_OnlineResource/gmd:linkage/gmd:URL"/>
                                <key
                                    label="dgiwg_sop_function"                                   
                                    xpath="srv:SV_OperationMetadata/srv:connectPoint/gmd:CI_OnlineResource/gmd:function/gmd:CI_OnLineFunctionCode/@codeListValue">
                                    <codelist name="gmd:CI_OnLineFunctionCode"/>
                                </key>
                            </values>
                            <snippet>

                                <srv:containsOperations>
                                   <srv:SV_OperationMetadata>
                                      <srv:operationName>
                                         <gco:CharacterString>{{dgiwg_sop_name}}</gco:CharacterString>
                                      </srv:operationName>
                                      <srv:DCP>
                                         <srv:DCPList codeList="http://www.isotc211.org/2005/iso19119/resources/Codelist/gmxCodelists.xml#DCPList"
                                                      codeListValue="{{dgiwg_sop_platform}}"/>
                                      </srv:DCP>
                                      <srv:connectPoint>
                                         <gmd:CI_OnlineResource>
                                            <gmd:linkage>
                                               <gmd:URL>{{dgiwg_sop_url}}</gmd:URL>
                                            </gmd:linkage>

                                            <gmd:protocol><gco:CharacterString/></gmd:protocol>
                                            <gmd:description><gco:CharacterString/></gmd:description>

                                            <gmd:function>
                                               <gmd:CI_OnLineFunctionCode
                                                   codeListValue="{{dgiwg_sop_function}}"
                                                   codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/Codelist/ML_gmxCodelists.xml#CI_OnLineFunctionCode">information</gmd:CI_OnLineFunctionCode>
                                            </gmd:function>
                                         </gmd:CI_OnlineResource>
                                      </srv:connectPoint>
                                   </srv:SV_OperationMetadata>
                                </srv:containsOperations>
                            </snippet>
                        </template>
                    </field>


                    <action type="add"
                            name="dgiwg_service_operation"
                            btnLabel="dgiwg_add_service_operation"
                            forceLabel="true"
                            or="containsOperations"
                            in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification">
                        <template>
                            <snippet>
                                <srv:containsOperations>
                                   <srv:SV_OperationMetadata>
                                      <srv:operationName>
                                         <gco:CharacterString></gco:CharacterString>
                                      </srv:operationName>
                                      <srv:DCP>
                                         <srv:DCPList codeList="http://www.isotc211.org/2005/iso19119/resources/Codelist/gmxCodelists.xml#DCPList"
                                                      codeListValue="WebServices"/>
                                      </srv:DCP>
                                      <srv:connectPoint>
                                         <gmd:CI_OnlineResource>
                                            <gmd:linkage>
                                               <gmd:URL>http://</gmd:URL>
                                            </gmd:linkage>

                                            <gmd:protocol><gco:CharacterString/></gmd:protocol>
                                            <gmd:description><gco:CharacterString/></gmd:description>

                                            <gmd:function>
                                               <gmd:CI_OnLineFunctionCode
                                                   codeListValue=""
                                                   codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/Codelist/ML_gmxCodelists.xml#CI_OnLineFunctionCode">information</gmd:CI_OnLineFunctionCode>
                                            </gmd:function>
                                         </gmd:CI_OnlineResource>
                                      </srv:connectPoint>
                                   </srv:SV_OperationMetadata>
                                </srv:containsOperations>
                            </snippet>
                        </template>
                    </action>

                </section>

                <!-- service coupling (coupledResource) -->

                <section name="dgiwg_service_coupling">

                    <field
                        name="dgiwg_service_coupled"
                        forceLabel="true"
                        xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/srv:coupledResource"
                        del="." />

                    <action type="add"
                            name="dgiwg_service_coupled"
                            btnLabel="dgiwg_add_service_coupled"
                            forceLabel="true"
                            or="coupledResource"
                            in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification">
                        <template>
                            <snippet>
                                <srv:coupledResource>
                                    <srv:SV_CoupledResource>
                                        <srv:operationName>
                                            <gco:CharacterString/>
                                        </srv:operationName>
                                        <srv:identifier>
                                            <gco:CharacterString/>
                                        </srv:identifier>
                                        <gco:ScopedName/>
                                    </srv:SV_CoupledResource>
                                </srv:coupledResource>
                            </snippet>
                        </template>
                    </action>


<!--                    <field
                        name="dgiwg_service_operation"
                        forceLabel="true"
                        templateModeOnly="true"
                        xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/srv:coupledResource"
                        del="." >

         <srv:coupledResource>
            <srv:SV_CoupledResource>
               <srv:operationName/>
               <srv:identifier/>
               <gco:ScopedName>scopedname</gco:ScopedName>
            </srv:SV_CoupledResource>
         </srv:coupledResource> -->
                </section>
            </section>

<!--                    <field name="operated_dataset_id"
                           templateModeOnly="true"
                           notDisplayedIfMissing="true"

                           xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/srv:operatesOn"
                           del=".">-->



<!--                <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/srv:serviceType"
                       or="serviceType" in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"/>

                <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/srv:serviceTypeVersion"
                       or="serviceTypeVersion" in="/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification"/>-->


<!--         <srv:serviceType>
            <gco:LocalName codeSpace="www.w3c.org">OGC:WMS</gco:LocalName>
         </srv:serviceType>
         <srv:serviceTypeVersion>-->

        </tab>




        <tab id="DMFcommon">
            <section name="metadata">

            <field xpath="/gmd:MD_Metadata/gmd:locale" or="locale" in="/gmd:MD_Metadata"/>

                <field xpath="/gmd:MD_Metadata/gmd:parentIdentifier" or="parentIdentifier"
                       in="/gmd:MD_Metadata"/>
          </section>
          <section name="sec_data_identification"></section>
          <section name="sec_spatio_temporal"></section>
          <section name="sec_constraint"></section>
          <section name="dataQualityInfo"></section>
          <section name="distributionInfo"></section>
        </tab>

        <thesaurusList>
          <thesaurus key="external.theme.NGMP_GeospatialInformationTypeCode"
                     maxtags="1"
                     fieldset="false" />

          <thesaurus key="external.theme.NGMP_GeoreferencingLevelCode"
                     maxtags="1"
                     fieldset="false" />

          <thesaurus key="external.theme.NGMP_RepresentationFormCode"
                     maxtags="1"
                     fieldset="false" />

          <thesaurus key="external.theme.NGMP_ThematicCode"
                     maxtags="1"
                     fieldset="false" />

        </thesaurusList>

    </view>


    <view name="default">
      <sidePanel>
        <directive data-gn-onlinesrc-list=""/>
        <directive gn-geo-publisher=""
                   data-ng-if="gnCurrentEdit.geoPublisherConfig"
                   data-config="{{gnCurrentEdit.geoPublisherConfig}}"
                   data-lang="lang"/>
        <directive data-gn-validation-report=""/>
        <directive data-gn-suggestion-list=""/>
        <directive data-gn-need-help="user-guide/describing-information/creating-metadata.html"/>
      </sidePanel>

      <tab id="default" mode="flat">
        <section xpath="/gmd:MD_Metadata/gmd:identificationInfo"/>
        <section xpath="/gmd:MD_Metadata/gmd:referenceSystemInfo"/>
        <section xpath="/gmd:MD_Metadata/gmd:spatialRepresentationInfo"/>
        <section xpath="/gmd:MD_Metadata/gmd:distributionInfo"/>
        <section xpath="/gmd:MD_Metadata/gmd:dataQualityInfo"/>
        <section name="gmd:MD_Metadata">
          <field xpath="/gmd:MD_Metadata/gmd:fileIdentifier"/>
          <field xpath="/gmd:MD_Metadata/gmd:language" or="language" in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:characterSet"/>
          <field xpath="/gmd:MD_Metadata/gmd:parentIdentifier" or="parentIdentifier"
                 in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:hierarchyLevel" or="hierarchyLevel"
                 in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:hierarchyLevelName" or="hierarchyLevelName"
                 in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:dateStamp"/>
          <field xpath="/gmd:MD_Metadata/gmd:metadataStandardName"/>
          <field xpath="/gmd:MD_Metadata/gmd:metadataStandardVersion"/>
          <field xpath="/gmd:MD_Metadata/gmd:contact" or="contact" in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:dataSetURI" or="dataSetURI" in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:locale" or="locale" in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:series"/>
          <field xpath="/gmd:MD_Metadata/gmd:describes"/>
          <field xpath="/gmd:MD_Metadata/gmd:propertyType"/>
          <field xpath="/gmd:MD_Metadata/gmd:featureType"/>
          <field xpath="/gmd:MD_Metadata/gmd:featureAttribute"/>
        </section>
      </tab>

      <!-- Elements that should not use the "flat" mode -->
      <flatModeExceptions>
        <for name="gmd:descriptiveKeywords"/>
        <for name="gmd:keyword"/>
        <for name="gmd:spatialResolution"/>
        <for name="gmd:pointOfContact"/>
        <for name="gmd:distributor"/>
        <for name="gmd:distributionFormat"/>
        <for name="gmd:contact"/>
        <for name="gmd:processor"/>
        <for name="gmd:topicCategory"/>
        <for name="srv:parameters"/>
      </flatModeExceptions>

      <!--
      To configure the type of transformations
      or the number of keyword allowed for e
      thesaurus define a specific configuration:

      eg. only 2 INSPIRE themes with Anchor.

            <thesaurusList>
              <thesaurus key="external.theme.httpinspireeceuropaeutheme-theme"
                         maxtags="2"
                         fieldset="false"
                         transformations="to-iso19139-keyword-with-anchor"/>
            </thesaurusList>
            -->

            <thesaurusList>
                <thesaurus key="external.none.allThesaurus"
                           fieldset="false"/>
            </thesaurusList>

        </view>
        <view name="advanced">
            <sidePanel>
                <directive data-gn-onlinesrc-list=""/>
                <directive gn-geo-publisher=""
                           data-ng-if="gnCurrentEdit.geoPublisherConfig"
                           data-config="{{gnCurrentEdit.geoPublisherConfig}}"
                           data-lang="lang"/>
                <directive data-gn-validation-report=""/>
                <directive data-gn-suggestion-list=""/>
                <directive data-gn-need-help="user-guide/describing-information/creating-metadata.html"/>
            </sidePanel>

            <tab id="identificationInfo" default="true">
                <section xpath="/gmd:MD_Metadata/gmd:identificationInfo" or="identificationInfo"
                         in="/gmd:MD_Metadata"/>
            </tab>
            <tab id="distributionInfo">
                <section xpath="/gmd:MD_Metadata/gmd:distributionInfo" or="distributionInfo"
                         in="/gmd:MD_Metadata"/>
            </tab>
            <tab id="dataQualityInfo">
                <section xpath="/gmd:MD_Metadata/gmd:dataQualityInfo" or="dataQualityInfo"
                         in="/gmd:MD_Metadata"/>
            </tab>
            <tab id="spatialRepresentationInfo">
                <section xpath="/gmd:MD_Metadata/gmd:spatialRepresentationInfo"
                         or="spatialRepresentationInfo" in="/gmd:MD_Metadata"/>
            </tab>
            <tab id="referenceSystemInfo">
                <section xpath="/gmd:MD_Metadata/gmd:referenceSystemInfo" or="referenceSystemInfo"
                         in="/gmd:MD_Metadata"/>
            </tab>
            <tab id="contentInfo" toggle="true">
                <section xpath="/gmd:MD_Metadata/gmd:contentInfo" or="contentInfo" in="/gmd:MD_Metadata"/>
            </tab>
            <tab id="portrayalCatalogueInfo" toggle="true">
                <section xpath="/gmd:MD_Metadata/gmd:portrayalCatalogueInfo" or="portrayalCatalogueInfo"
                         in="/gmd:MD_Metadata"/>
            </tab>
            <tab id="metadata">
                <section name="metadata">
                    <field xpath="/gmd:MD_Metadata/gmd:fileIdentifier"/>
                    <field xpath="/gmd:MD_Metadata/gmd:language" or="language" in="/gmd:MD_Metadata"/>
                    <field xpath="/gmd:MD_Metadata/gmd:locale" or="locale" in="/gmd:MD_Metadata"/>
                    <field xpath="/gmd:MD_Metadata/gmd:characterSet"/>
                    <field xpath="/gmd:MD_Metadata/gmd:parentIdentifier" or="parentIdentifier"
                           in="/gmd:MD_Metadata"/>
                    <field xpath="/gmd:MD_Metadata/gmd:hierarchyLevel" or="hierarchyLevel"
                           in="/gmd:MD_Metadata"/>
                    <field xpath="/gmd:MD_Metadata/gmd:hierarchyLevelName" or="hierarchyLevelName"
                           in="/gmd:MD_Metadata"/>
                    <field xpath="/gmd:MD_Metadata/gmd:dateStamp"/>
                    <field xpath="/gmd:MD_Metadata/gmd:metadataStandardName"/>
                    <field xpath="/gmd:MD_Metadata/gmd:metadataStandardVersion"/>
                    <field xpath="/gmd:MD_Metadata/gmd:contact" or="contact" in="/gmd:MD_Metadata"/>
                    <field xpath="/gmd:MD_Metadata/gmd:dataSetURI" or="dataSetURI" in="/gmd:MD_Metadata"/>
                    <field xpath="/gmd:MD_Metadata/gmd:series"/>
                    <field xpath="/gmd:MD_Metadata/gmd:describes"/>
                    <field xpath="/gmd:MD_Metadata/gmd:propertyType"/>
                    <field xpath="/gmd:MD_Metadata/gmd:featureType"/>
                    <field xpath="/gmd:MD_Metadata/gmd:featureAttribute"/>
                </section>
            </tab>
            <tab id="metadataConstraints" toggle="true">
                <section xpath="/gmd:MD_Metadata/gmd:metadataConstraints" or="metadataConstraints"
                         in="/gmd:MD_Metadata"/>
            </tab>
            <tab id="metadataMaintenance" toggle="true">
                <section xpath="/gmd:MD_Metadata/gmd:metadataMaintenance" or="metadataMaintenance"
                         in="/gmd:MD_Metadata"/>
            </tab>
            <tab id="applicationSchemaInfo" toggle="true">
                <section xpath="/gmd:MD_Metadata/gmd:applicationSchemaInfo" or="applicationSchemaInfo"
                         in="/gmd:MD_Metadata"/>
            </tab>
        </view>
        <view name="xml">
            <sidePanel>
                <directive data-gn-onlinesrc-list=""/>
                <directive gn-geo-publisher=""
                           data-ng-if="gnCurrentEdit.geoPublisherConfig"
                           data-config="{{gnCurrentEdit.geoPublisherConfig}}"
                           data-lang="lang"/>
                <directive data-gn-validation-report=""/>
                <directive data-gn-suggestion-list=""/>
                <directive data-gn-need-help="user-guide/describing-information/creating-metadata.html"/>
            </sidePanel>
            <tab id="xml" default="true"/>
        </view>
    </views>
    <batchEditing>
        <section name="identification">
            <!-- Update existing title in metadata record -->
            <field name="title"
                   xpath="gmd:identificationInfo/*/gmd:citation/*/gmd:title"
                   insertMode="gn_replace"
                   indexField="title">
                <template><![CDATA[<gco:CharacterString xmlns:gco='http://www.isotc211.org/2005/gco'>{{value}}</gco:CharacterString>]]></template>
            </field>

            <!-- Insert a new keyword in the first gmd:descriptiveKeywords found.
            Warning: The section may contains a thesaurusName reference and
            the keyword may not be part of it.
            Warning: Duplicates may be inserted.
            -->
            <field name="keyword"
                   xpath="gmd:identificationInfo/gmd:MD_DataIdentification/
                      gmd:descriptiveKeywords/gmd:MD_Keywords/gmd:keyword"
                   indexField="keyword"
                   insertMode="gn_create">
                <template>
          <![CDATA[<gco:CharacterString xmlns:gco='http://www.isotc211.org/2005/gco'>{{value}}</gco:CharacterString>]]></template>
            </field>

            <!-- Insert a new topic category
            Warning: Duplicates may be inserted.
            -->
            <field name="topicCats"
                   xpath="gmd:identificationInfo/*/
                      gmd:topicCategory"
                   use="data-gn-codelist-picker"
                   codelist="gmd:MD_TopicCategoryCode"
                   indexField="topicCat"
                   insertMode="gn_create">
                <template>
          <![CDATA[<gmd:MD_TopicCategoryCode xmlns:gmd='http://www.isotc211.org/2005/gmd'>{{value}}</gmd:MD_TopicCategoryCode>]]></template>
            </field>

            <!-- Insert a new extent
            Warning: Duplicates may be inserted.
            -->
            <field name="extent"
                   xpath="gmd:identificationInfo/gmd:MD_DataIdentification/gmd:extent"
                   use="data-gn-draw-bbox"
                   insertMode="gn_create"/>

            <!-- Insert a new resource language
            Warning: Duplicates may be inserted.
            -->
            <field name="language"
                   xpath="gmd:identificationInfo/*/
                      gmd:language"
                   use="data-gn-language-picker"
                   insertMode="gn_replace"
                   removable="true">
                <template>
          <![CDATA[<gmd:LanguageCode xmlns:gmd='http://www.isotc211.org/2005/gmd' codeListValue='{{value}}'/>]]></template>
            </field>

            <!-- Insert, or replace if existing, the parent identifier.
            Warning: Duplicates may be inserted.
            -->
            <field name="parentIdentifier"
                   xpath="gmd:parentIdentifier"
                   use="data-gn-metadata-picker"
                   insertMode="gn_replace"
                   removable="true">
                <template>
          <![CDATA[<gco:CharacterString xmlns:gco='http://www.isotc211.org/2005/gco'>{{value}}</gco:CharacterString>]]></template>
            </field>

            <field name="resourceStatus"
                   xpath="gmd:identificationInfo/*/
                      gmd:status"
                   use="data-gn-codelist-picker"
                   codelist="gmd:MD_ProgressCode"
                   insertMode="gn_replace"
                   removable="true">
                <template>
          <![CDATA[<gmd:MD_ProgressCode xmlns:gmd='http://www.isotc211.org/2005/gmd' codeListValue='{{value}}'/>]]></template>
            </field>
        </section>

        <section name="resourceConstraints">
            <!-- Insert a new access contraints
                  Warning: Duplicates may be inserted.
            -->
            <field name="legalConstraints"
                   xpath="gmd:identificationInfo/*/
                      gmd:resourceConstraints/gmd:MD_LegalConstraints/
                        gmd:accessConstraints"
                   use="data-gn-codelist-picker"
                   codelist="gmd:MD_RestrictionCode"
                   insertMode="gn_create"
                   removable="true">
                <template>
          <![CDATA[<gmd:MD_RestrictionCode xmlns:gmd='http://www.isotc211.org/2005/gmd' codeListValue='{{value}}'/>]]></template>
            </field>

            <!-- Insert a new other contraints
                  Warning: Duplicates may be inserted.
            -->
            <field name="otherConstraints"
                   xpath="gmd:identificationInfo/*/
                      gmd:resourceConstraints/gmd:MD_LegalConstraints/
                        gmd:otherConstraints"
                   use="textarea"
                   insertMode="gn_create"
                   removable="true">
                <template>
          <![CDATA[<gco:CharacterString xmlns:gco='http://www.isotc211.org/2005/gco'>{{value}}</gco:CharacterString>]]></template>
            </field>
        </section>


        <!-- Replace current lineage or insert a new one.
              Warning: Duplicates may be inserted.
        -->
        <section name="quality">
            <field name="lineage"
                   xpath="gmd:dataQualityInfo/gmd:DQ_DataQuality/
                      gmd:lineage/gmd:LI_Lineage/gmd:statement"
                   use="textarea"
                   insertMode="gn_replace"
                   removable="true">
                <template>
          <![CDATA[<gco:CharacterString xmlns:gco='http://www.isotc211.org/2005/gco'>{{value}}</gco:CharacterString>]]></template>
            </field>
        </section>

        <section name="contact">
            <field name="resourceContact"
                   xpath="gmd:identificationInfo/gmd:MD_DataIdentification/gmd:pointOfContact"
                   use="data-gn-directory-entry-selector"
                   insertMode="gn_create"/>
            <field name="distributor"
                   xpath="gmd:distributionInfo/gmd:MD_Distribution/gmd:distributor/gmd:MD_Distributor/gmd:distributorContact"
                   use="data-gn-directory-entry-selector"
                   insertMode="gn_create"/>
            <field name="mdContact"
                   xpath="gmd:contact"
                   use="data-gn-directory-entry-selector"
                   insertMode="gn_create"/>
        </section>

        <section name="metadata">
            <field name="mdLanguage"
                   xpath="gmd:language"
                   use="data-gn-language-picker"
                   removable="true">
                <template>
          <![CDATA[<gmd:LanguageCode xmlns:gmd='http://www.isotc211.org/2005/gmd' codeListValue='{{value}}'/>]]></template>
            </field>
        </section>
    </batchEditing>
</editor>
